<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Polaroid Booth - Free Online Polaroid Camera & Vintage Photo Editor</title>
    <meta name="title" content="Polaroid Booth - Free Online Polaroid Camera & Vintage Photo Editor">
    <meta name="description"
        content="Create stunning vintage polaroid photos online for free. Instant polaroid camera booth with filters, stickers, multi-photo mode, and customization. No download required. Perfect for social media and memories.">
    <meta name="keywords"
        content="polaroid booth, polaroid camera online, vintage photo editor, instant camera online, polaroid photo maker, retro photo booth, free polaroid editor, online photo booth, vintage camera filter, polaroid effect online">
    <meta name="author" content="Sarath Ramesh">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://polaroidbooth.com/">

    <!-- Additional SEO Meta Tags -->
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="theme-color" content="#C39974">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://polaroidbooth.com/">
    <meta property="og:title" content="Polaroid Booth - Free Online Polaroid Camera & Vintage Photo Editor">
    <meta property="og:description"
        content="Create stunning vintage polaroid photos online for free. Instant polaroid camera booth with filters, effects, and customization.">
    <meta property="og:image" content="https://polaroidbooth.com/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://polaroidbooth.com/">
    <meta property="twitter:title" content="Polaroid Booth - Free Online Polaroid Camera & Vintage Photo Editor">
    <meta property="twitter:description"
        content="Create stunning vintage polaroid photos online for free. Instant polaroid camera booth with filters, effects, and customization.">
    <meta property="twitter:image" content="https://polaroidbooth.com/og-image.jpg">

    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Polaroid Booth",
      "alternateName": "Free Online Polaroid Camera",
      "description": "Free online polaroid camera and vintage photo editor. Create instant polaroid-style photos with filters and effects.",
      "url": "https://polaroidbooth.com/",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "Sarath Ramesh",
        "url": "https://github.com/sarathoff"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "1250",
        "bestRating": "5",
        "worstRating": "1"
      },
      "featureList": [
        "Instant camera capture",
        "Multi-photo grid mode (4 photos)",
        "Photo upload",
        "12+ vintage filters",
        "Fun sticker overlays",
        "Custom text overlay",
        "Brightness and contrast adjustment",
        "High-quality download",
        "No watermarks",
        "Privacy-focused"
      ],
      "screenshot": "https://polaroidbooth.com/screenshot.jpg"
    }
    </script>

    <!-- Breadcrumb Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://polaroidbooth.com/"
      }]
    }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Is Polaroid Booth free to use?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, Polaroid Booth is completely free to use. There are no subscriptions, hidden fees, or watermarks on your photos."
        }
      }, {
        "@type": "Question",
        "name": "Do you store my photos?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, all photo processing happens directly in your browser. Your photos never leave your device and are never uploaded to our servers."
        }
      }, {
        "@type": "Question",
        "name": "What devices does Polaroid Booth work on?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Polaroid Booth works on any device with a modern web browser, including desktop computers, laptops, tablets, and smartphones."
        }
      }, {
        "@type": "Question",
        "name": "Can I use Polaroid Booth without a camera?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, you can upload existing photos from your device and transform them into polaroid-style images."
        }
      }]
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500;600&family=Caveat:wght@700&family=Dancing+Script:wght@700&family=Patrick+Hand&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --color-background: #F8F5F2;
            --color-surface: #FFFFFF;
            --color-primary: #C39974;
            --color-primary-deep: #B18965;
            --color-text-heading: #3D352E;
            --color-text-body: #594F48;
            --color-text-muted: #8E8178;
            --color-border: #EAE3DC;
            --color-accent: #E57373;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--color-background);
            color: var(--color-text-body);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-family: var(--font-heading);
            font-size: 3rem;
            color: var(--color-text-heading);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            color: var(--color-text-muted);
            font-size: 1.1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2.5rem;
            max-width: 1100px;
            margin: 0 auto;
            align-items: start;
        }

        @media (min-width: 992px) {
            .main-grid {
                grid-template-columns: 1fr 400px;
            }
        }

        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
        }

        /* --- Left Column: Input --- */
        .video-container {
            position: relative;
            aspect-ratio: 1/1;
            background: #EAE3DC;
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 6px solid var(--color-surface);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
        }

        #videoElement {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1);
            display: block;
        }

        .video-placeholder {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: var(--color-text-muted);
            font-size: 1rem;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        .video-placeholder-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            filter: grayscale(1);
            opacity: 0.5;
        }



        /* Countdown Overlay */
        .countdown-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
            backdrop-filter: blur(4px);
        }

        .countdown-number {
            font-size: 8rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            animation: countdownPulse 1s ease-in-out;
        }

        @keyframes countdownPulse {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .btn {
            padding: 0.85rem 1.5rem;
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
        }

        .btn:focus-visible {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            background: var(--color-primary-deep);
            transform: translateY(-2px);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-outline {
            background: transparent;
            color: var(--color-text-body);
            border-color: var(--color-border);
        }

        .btn-outline:hover {
            background: var(--color-background);
            border-color: var(--color-text-muted);
        }

        .btn-danger {
            background: var(--color-accent);
            color: white;
        }

        .btn-danger:hover {
            background: #d32f2f;
            transform: translateY(-2px);
        }


        /* --- Right Column: Output & Edit --- */
        .output-column {
            position: sticky;
            top: 2rem;
        }

        .polaroid-frame {
            background: var(--color-surface);
            padding: 16px 16px 60px 16px;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-lg);
            max-width: 350px;
            margin: 0 auto;
            position: relative;
            transform: rotate(-2.5deg);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid rgba(0, 0, 0, 0.02);
        }

        .polaroid-frame:hover {
            transform: rotate(0deg) translateY(-8px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        .polaroid-photo {
            aspect-ratio: 1/1;
            overflow: hidden;
            background: #F0EDE6;
            position: relative;
        }

        .polaroid-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .polaroid-text {
            text-align: center;
            font-size: 1.8rem;
            color: var(--color-text-body);
            min-height: 2rem;
            margin-top: 1rem;
            line-height: 1.2;
            padding: 0 0.5rem;
            word-wrap: break-word;
        }

        .polaroid-date {
            text-align: center;
            font-family: monospace;
            font-size: 0.75rem;
            color: var(--color-text-muted);
            opacity: 0.8;
            margin-top: 0.5rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            background: transparent;
            border: 2px dashed var(--color-border);
            border-radius: var(--radius-lg);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.7;
        }

        .empty-state h3 {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-text-heading);
            margin-bottom: 0.5rem;
        }

        .empty-state p {
            color: var(--color-text-muted);
            font-size: 1rem;
        }

        /* --- Customization Tabs --- */
        #customizationCard {
            margin-top: 2.5rem;
            padding: 1rem;
        }

        .tab-menu {
            display: flex;
            margin-bottom: 1.5rem;
            background: var(--color-background);
            border-radius: var(--radius-md);
            padding: 0.5rem;
        }

        .tab-btn {
            flex: 1;
            padding: 0.75rem 0.5rem;
            border: none;
            background: none;
            cursor: pointer;
            font-family: var(--font-body);
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-text-muted);
            border-radius: var(--radius-sm);
            transition: all 0.3s;
        }

        .tab-btn:hover {
            color: var(--color-text-body);
        }

        .tab-btn.active {
            color: var(--color-text-heading);
            background: var(--color-surface);
            box-shadow: var(--shadow-sm);
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .option-btn {
            padding: 0.75rem 0.5rem;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            background: transparent;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-size: 0.9rem;
        }

        .option-btn:hover {
            border-color: var(--color-primary);
            background: #FAF7F5;
        }

        .option-btn.active {
            border-color: var(--color-primary);
            background: var(--color-primary);
            color: white;
            transform: scale(1.05);
        }

        .option-btn.active .option-name {
            color: white;
        }

        .option-name {
            font-size: 0.75rem;
            color: var(--color-text-body);
            font-weight: 500;
            margin-top: 0.5rem;
            transition: color 0.2s;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            background: var(--color-background);
            transition: all 0.2s;
        }

        .input-field::placeholder {
            color: var(--color-text-muted);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--color-primary);
            background: var(--color-surface);
            box-shadow: 0 0 0 3px rgba(195, 153, 116, 0.2);
        }

        .label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-text-heading);
            margin-bottom: 0.75rem;
        }

        .section {
            margin-bottom: 2rem;
        }

        .section:last-child {
            margin-bottom: 0;
        }

        .adjustment-control {
            margin-bottom: 1rem;
        }

        .adjustment-control label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .adjustment-control .value {
            font-weight: 600;
            color: var(--color-text-heading);
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: var(--color-border);
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }

        input[type="range"]:hover {
            opacity: 1;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--color-primary);
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }

        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--color-primary);
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }


        .final-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            border-top: 1px solid var(--color-border);
            padding-top: 1.5rem;
            margin-top: 1.5rem;
        }

        .hidden {
            display: none !important;
        }

        /* Navigation */
        .nav {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            padding: 1rem 0;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .nav-brand {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-text-heading);
            text-decoration: none;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--color-text-body);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--color-primary);
        }

        /* Footer */
        .footer {
            background: var(--color-surface);
            border-top: 1px solid var(--color-border);
            margin-top: 4rem;
            padding: 3rem 0 1.5rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-family: var(--font-heading);
            color: var(--color-text-heading);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: var(--color-text-body);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-section a:hover {
            color: var(--color-primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--color-border);
            color: var(--color-text-muted);
            font-size: 0.9rem;
        }

        .footer-bottom a {
            color: var(--color-primary);
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .nav-links {
                gap: 1rem;
                font-size: 0.9rem;
            }
        }

        /* Sticker Styles */
        .sticker-item {
            font-size: 2.5rem;
            cursor: pointer;
            transition: transform 0.2s;
            user-select: none;
        }

        .sticker-item:hover {
            transform: scale(1.2);
        }

        .sticker-item:active {
            transform: scale(0.95);
        }

        .active-sticker-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            font-size: 1.5rem;
        }

        .remove-sticker-btn {
            background: var(--color-accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .remove-sticker-btn:hover {
            transform: scale(1.1);
        }

        /* Multi-Photo Grid */
        .multi-photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            padding: 8px;
            background: white;
        }

        .multi-photo-item {
            aspect-ratio: 1/1;
            overflow: hidden;
            background: #F0EDE6;
            position: relative;
        }

        .multi-photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .multi-photo-counter {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 99px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Sticker Overlay on Photo */
        .photo-sticker {
            position: absolute;
            font-size: 2rem;
            user-select: none;
            z-index: 5;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
            pointer-events: none;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="/" class="nav-brand">üì∑ Polaroid Booth</a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/about.html">About</a></li>
                <li><a href="/contact.html">Contact</a></li>
                <li><a href="/privacy.html">Privacy</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header class="header">
            <h1>Free Online Polaroid Booth - Instant Vintage Photo Editor</h1>
            <p>Capture the moment. Create timeless, vintage-style polaroid photos instantly from your camera or uploads.
                No download required!</p>
        </header>

        <!-- SEO-friendly content section -->


        <div class="main-grid">

            <div class="input-column">
                <div class="card">
                    <div class="video-container">
                        <video id="videoElement" autoplay playsinline muted class="hidden"></video>
                        <div id="videoPlaceholder" class="video-placeholder">
                            <div class="video-placeholder-icon">üì∑</div>
                            <div>Your camera feed will appear here</div>
                        </div>
                        <div id="countdownOverlay" class="countdown-overlay hidden">
                            <div id="countdownNumber" class="countdown-number">3</div>
                        </div>
                    </div>
                    <div class="controls-grid" id="cameraControls">
                        <button class="btn btn-primary" id="startCameraBtn" style="grid-column: 1 / -1;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z">
                                </path>
                                <circle cx="12" cy="13" r="3"></circle>
                            </svg>
                            Start Camera
                        </button>
                        <button class="btn btn-outline" id="uploadBtn" style="grid-column: 1 / -1;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            Upload Photo
                        </button>
                    </div>

                    <div class="controls-grid hidden" id="photoControls">
                        <button class="btn btn-primary" id="captureBtn">üì∏ Capture</button>
                        <button class="btn btn-outline" id="multiCaptureBtn">üì∏üì∏ Multi (4)</button>
                        <button class="btn btn-danger" id="stopCameraBtn">‚èπÔ∏è Stop</button>
                    </div>
                </div>


                <input type="file" id="fileInput" accept="image/*" class="hidden">
            </div>

            <div class="output-column">

                <div id="emptyState" class="empty-state">
                    <div class="empty-state-icon">üñºÔ∏è</div>
                    <h3>Your Polaroid Preview</h3>
                    <p>Start your camera or upload a photo to begin customizing.</p>
                </div>

                <div id="polaroidPreview" class="hidden">
                    <!-- Polaroid will be rendered here by JS -->
                </div>

                <div class="card hidden" id="customizationCard">
                    <div class="tab-menu">
                        <button class="tab-btn active" onclick="showTab(event, 'filters')">üé® Filters</button>
                        <button class="tab-btn" onclick="showTab(event, 'adjust')">‚öôÔ∏è Adjust</button>
                        <button class="tab-btn" onclick="showTab(event, 'text')">‚úèÔ∏è Text</button>
                        <button class="tab-btn" onclick="showTab(event, 'stickers')">üòä Stickers</button>
                    </div>

                    <div id="tab-filters" class="tab-pane active">
                        <label class="label">Quick Filters</label>
                        <div class="option-grid" id="filterPresets">
                            <!-- Filter presets will be injected here by JS -->
                        </div>
                    </div>

                    <div id="tab-adjust" class="tab-pane">
                        <!-- Sliders will be injected here by JS -->
                    </div>

                    <div id="tab-text" class="tab-pane">
                        <div class="section">
                            <label class="label">Add a message (optional)</label>
                            <input type="text" id="customText" class="input-field" placeholder="A moment in time..."
                                maxlength="40">
                        </div>
                        <div class="section">
                            <label class="label">Font Style</label>
                            <div class="option-grid" id="fontOptions">
                                <!-- Font options injected here by JS -->
                            </div>
                        </div>
                    </div>

                    <div id="tab-stickers" class="tab-pane">
                        <div class="section">
                            <label class="label">Add Stickers</label>
                            <div class="option-grid" id="stickerOptions">
                                <!-- Sticker options will be injected here by JS -->
                            </div>
                        </div>
                        <div class="section" id="activeStickersList" style="display: none;">
                            <label class="label">Active Stickers</label>
                            <div id="stickersList" style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                <!-- Active stickers will appear here -->
                            </div>
                        </div>
                    </div>

                    <div class="final-actions">
                        <button class="btn btn-outline" id="clearBtn">
                            üîÑ Clear
                        </button>
                        <button class="btn btn-primary" id="downloadBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <section
        style="max-width: 900px; margin: 0 auto 3rem; padding: 0 1rem; text-align: center; color: var(--color-text-body);">
        <h2
            style="font-family: var(--font-heading); font-size: 1.8rem; color: var(--color-text-heading); margin-bottom: 1rem;">
            Transform Your Photos into Vintage Polaroid Masterpieces</h2>
        <p style="margin-bottom: 1rem;">Polaroid Booth is the ultimate free online polaroid camera and vintage photo
            editor. Whether you're capturing new moments with your webcam or transforming existing photos, our
            intuitive tool brings the nostalgic charm of instant polaroid photography to your fingertips.</p>
        <p style="margin-bottom: 1rem;"><strong>Why Choose Polaroid Booth?</strong> 100% free, no watermarks,
            privacy-focused (all processing happens in your browser), 12+ vintage filters, fun sticker overlays,
            multi-photo grid mode, custom text overlays, and
            instant high-quality downloads. Perfect for social media, scrapbooking, gifts, and preserving memories
            with that classic polaroid aesthetic.</p>
    </section>

    <canvas id="canvas" class="hidden"></canvas>

    <script>
        // --- STATE MANAGEMENT ---
        let stream = null;
        let capturedPhoto = null;

        const defaultAdjustments = {
            brightness: 100,
            contrast: 100,
            saturate: 100,
            sepia: 0,
            grayscale: 0,
        };
        let adjustments = { ...defaultAdjustments };

        let selectedFont = "'Caveat', cursive";
        let selectedFilterPreset = 'none';
        let activeStickers = [];
        let multiPhotos = [];
        let isMultiCapture = false;

        // --- DOM ELEMENTS ---
        const video = document.getElementById('videoElement');
        const videoPlaceholder = document.getElementById('videoPlaceholder');
        const countdownOverlay = document.getElementById('countdownOverlay');
        const countdownNumber = document.getElementById('countdownNumber');
        const cameraControls = document.getElementById('cameraControls');
        const photoControls = document.getElementById('photoControls');
        const startCameraBtn = document.getElementById('startCameraBtn');
        const stopCameraBtn = document.getElementById('stopCameraBtn');
        const captureBtn = document.getElementById('captureBtn');
        const multiCaptureBtn = document.getElementById('multiCaptureBtn');
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInput = document.getElementById('fileInput');
        const emptyState = document.getElementById('emptyState');
        const polaroidPreview = document.getElementById('polaroidPreview');
        const customizationCard = document.getElementById('customizationCard');
        const customTextEl = document.getElementById('customText');
        const clearBtn = document.getElementById('clearBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const canvas = document.getElementById('canvas');

        // --- CONFIGURATION ---
        const fonts = [
            { name: 'Caveat', family: "'Caveat', cursive" },
            { name: 'Patrick Hand', family: "'Patrick Hand', sans-serif" },
            { name: 'Dancing Script', family: "'Dancing Script', cursive" }
        ];

        const adjustmentConfigs = [
            { id: 'brightness', name: 'Brightness', min: 0, max: 200, unit: '%' },
            { id: 'contrast', name: 'Contrast', min: 0, max: 200, unit: '%' },
            { id: 'saturate', name: 'Saturation', min: 0, max: 200, unit: '%' },
            { id: 'sepia', name: 'Sepia', min: 0, max: 100, unit: '%' },
            { id: 'grayscale', name: 'Grayscale', min: 0, max: 100, unit: '%' }
        ];

        // Filter Presets
        const filterPresets = [
            { id: 'none', name: 'Original', values: { brightness: 100, contrast: 100, saturate: 100, sepia: 0, grayscale: 0 } },
            { id: 'vintage', name: 'Vintage', values: { brightness: 110, contrast: 120, saturate: 130, sepia: 40, grayscale: 0 } },
            { id: 'classic', name: 'Classic', values: { brightness: 105, contrast: 110, saturate: 100, sepia: 20, grayscale: 0 } },
            { id: 'bw', name: 'B&W', values: { brightness: 100, contrast: 120, saturate: 100, sepia: 0, grayscale: 100 } },
            { id: 'warm', name: 'Warm', values: { brightness: 110, contrast: 100, saturate: 140, sepia: 30, grayscale: 0 } },
            { id: 'retro', name: 'Retro', values: { brightness: 110, contrast: 90, saturate: 100, sepia: 60, grayscale: 0 } },
            { id: 'dreamy', name: 'Dreamy', values: { brightness: 110, contrast: 90, saturate: 140, sepia: 0, grayscale: 0 } },
            { id: 'cool', name: 'Cool', values: { brightness: 105, contrast: 110, saturate: 80, sepia: 0, grayscale: 0 } },
            { id: 'faded', name: 'Faded', values: { brightness: 115, contrast: 85, saturate: 70, sepia: 0, grayscale: 0 } },
            { id: 'noir', name: 'Noir', values: { brightness: 90, contrast: 150, saturate: 100, sepia: 0, grayscale: 100 } },
            { id: 'sunset', name: 'Sunset', values: { brightness: 110, contrast: 110, saturate: 160, sepia: 50, grayscale: 0 } },
            { id: 'arctic', name: 'Arctic', values: { brightness: 120, contrast: 100, saturate: 60, sepia: 0, grayscale: 0 } }
        ];

        // Stickers
        const stickers = [
            '‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíô', 'üíö', 'üíõ', 'üß°', 'üíú',
            '‚≠ê', '‚ú®', 'üåü', 'üí´', 'üåô', '‚òÄÔ∏è', 'üåà', '‚òÅÔ∏è',
            'üòä', 'üòç', 'ü•∞', 'üòé', 'ü§©', 'üòò', 'üòÇ', 'ü§ó',
            'üéâ', 'üéä', 'üéà', 'üéÅ', 'üéÄ', 'üéÇ', 'üç∞',
            'üå∏', 'üå∫', 'üåª', 'üåπ', 'üå∑', 'üåº', 'üíê',
            'ü¶ã', 'üêù', 'üêû', 'ü¶Ñ', 'üê±', 'üê∂', 'üêª',
            'üì∑', 'üéµ', 'üé∂', 'üé∏', 'üé®', '‚úèÔ∏è', 'üìù'
        ];

        // --- INITIALIZATION ---

        function initializeUI() {
            // Filter Presets
            const filterPresetsContainer = document.getElementById('filterPresets');
            filterPresetsContainer.innerHTML = '';
            filterPresets.forEach(preset => {
                const btn = document.createElement('button');
                btn.className = 'option-btn' + (preset.id === selectedFilterPreset ? ' active' : '');
                btn.innerHTML = `<div class="option-name">${preset.name}</div>`;
                btn.onclick = () => applyFilterPreset(preset.id, btn);
                filterPresetsContainer.appendChild(btn);
            });

            // Adjustments
            const adjustContainer = document.getElementById('tab-adjust');
            adjustContainer.innerHTML = '';
            adjustmentConfigs.forEach(adj => {
                const control = document.createElement('div');
                control.className = 'adjustment-control';
                control.innerHTML = `
                    <label for="${adj.id}">
                        <span>${adj.name}</span>
                        <span class="value" id="${adj.id}Value">${adjustments[adj.id]}%</span>
                    </label>
                    <input type="range" id="${adj.id}" min="${adj.min}" max="${adj.max}" value="${adjustments[adj.id]}">
                `;
                adjustContainer.appendChild(control);

                document.getElementById(adj.id).addEventListener('input', (e) => {
                    adjustments[adj.id] = e.target.value;
                    document.getElementById(`${adj.id}Value`).textContent = `${e.target.value}%`;
                    selectedFilterPreset = 'custom';
                    updateFilterPresetButtons();
                    renderPreview();
                });
            });

            // Fonts
            const fontContainer = document.getElementById('fontOptions');
            fontContainer.innerHTML = '';
            fonts.forEach(font => {
                const btn = document.createElement('button');
                btn.className = 'option-btn' + (font.family === selectedFont ? ' active' : '');
                btn.textContent = font.name;
                btn.style.fontFamily = font.family;
                btn.onclick = () => selectFont(font.family, btn);
                fontContainer.appendChild(btn);
            });

            // Stickers
            const stickerContainer = document.getElementById('stickerOptions');
            stickerContainer.innerHTML = '';
            stickers.forEach(sticker => {
                const btn = document.createElement('div');
                btn.className = 'sticker-item';
                btn.textContent = sticker;
                btn.onclick = () => addSticker(sticker);
                stickerContainer.appendChild(btn);
            });
        }

        // --- TAB NAVIGATION ---

        function showTab(event, tabId) {
            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // --- OPTION SELECTION ---

        function applyFilterPreset(presetId, element) {
            selectedFilterPreset = presetId;
            const preset = filterPresets.find(p => p.id === presetId);
            if (preset) {
                adjustments = { ...preset.values };
                updateAdjustmentSliders();
                updateFilterPresetButtons();
                renderPreview();
            }
        }

        function updateFilterPresetButtons() {
            document.querySelectorAll('#filterPresets .option-btn').forEach(btn => btn.classList.remove('active'));
            const activeBtn = Array.from(document.querySelectorAll('#filterPresets .option-btn'))
                .find((btn, idx) => filterPresets[idx].id === selectedFilterPreset);
            if (activeBtn) activeBtn.classList.add('active');
        }

        function updateAdjustmentSliders() {
            adjustmentConfigs.forEach(adj => {
                const slider = document.getElementById(adj.id);
                const valueDisplay = document.getElementById(`${adj.id}Value`);
                if (slider && valueDisplay) {
                    slider.value = adjustments[adj.id];
                    valueDisplay.textContent = `${adjustments[adj.id]}%`;
                }
            });
        }

        function selectFont(family, element) {
            selectedFont = family;
            document.querySelectorAll('#fontOptions .option-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            renderPreview();
        }

        // --- STICKER FUNCTIONS ---

        function addSticker(emoji) {
            const stickerId = Date.now() + Math.random();

            // Position stickers in corners to avoid blocking the photo
            const corners = [
                { x: 8, y: 8 },      // Top-left
                { x: 85, y: 8 },     // Top-right
                { x: 8, y: 85 },     // Bottom-left
                { x: 85, y: 85 }     // Bottom-right
            ];

            // Cycle through corners based on number of stickers
            const cornerIndex = activeStickers.length % corners.length;
            const position = corners[cornerIndex];

            activeStickers.push({
                id: stickerId,
                emoji: emoji,
                x: position.x,
                y: position.y
            });
            updateStickersList();
            renderPreview();
        }

        function removeSticker(stickerId) {
            activeStickers = activeStickers.filter(s => s.id !== stickerId);
            updateStickersList();
            renderPreview();
        }

        function updateStickersList() {
            const stickersList = document.getElementById('stickersList');
            const activeStickersList = document.getElementById('activeStickersList');

            if (activeStickers.length === 0) {
                activeStickersList.style.display = 'none';
                return;
            }

            activeStickersList.style.display = 'block';
            stickersList.innerHTML = '';

            activeStickers.forEach(sticker => {
                const badge = document.createElement('div');
                badge.className = 'active-sticker-badge';
                badge.innerHTML = `
                    <span>${sticker.emoji}</span>
                    <button class="remove-sticker-btn" onclick="removeSticker(${sticker.id})">√ó</button>
                `;
                stickersList.appendChild(badge);
            });
        }

        // --- CAMERA & UPLOAD ---

        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: 'user', width: { ideal: 1024 }, height: { ideal: 1024 } },
                    audio: false
                });
                video.srcObject = stream;
                video.classList.remove('hidden');
                videoPlaceholder.classList.add('hidden');
                cameraControls.classList.add('hidden');
                photoControls.classList.remove('hidden');
            } catch (error) {
                console.error('Camera error:', error);
                alert('Unable to access camera. Please check permissions.');
            }
        }

        function stopCamera() {
            if (stream) stream.getTracks().forEach(track => track.stop());
            stream = null;
            video.srcObject = null;
            video.classList.add('hidden');
            videoPlaceholder.classList.remove('hidden');
            cameraControls.classList.remove('hidden');
            photoControls.classList.add('hidden');
        }

        // Countdown Timer
        function startCountdown() {
            return new Promise((resolve) => {
                let count = 3;
                countdownOverlay.classList.remove('hidden');
                countdownNumber.textContent = count;

                const interval = setInterval(() => {
                    count--;
                    if (count > 0) {
                        countdownNumber.textContent = count;
                        countdownNumber.style.animation = 'none';
                        setTimeout(() => {
                            countdownNumber.style.animation = 'countdownPulse 1s ease-in-out';
                        }, 10);
                    } else {
                        clearInterval(interval);
                        countdownOverlay.classList.add('hidden');
                        resolve();
                    }
                }, 1000);
            });
        }

        async function capturePhoto() {
            if (!stream) return;

            captureBtn.disabled = true;
            await startCountdown();

            const ctx = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            ctx.save();
            ctx.scale(-1, 1);
            ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
            ctx.restore();
            capturedPhoto = canvas.toDataURL('image/jpeg', 0.95);
            multiPhotos = [];
            isMultiCapture = false;
            showOutputUI();
            renderPreview();
            captureBtn.disabled = false;
        }

        async function captureMultiPhotos() {
            if (!stream) return;

            multiCaptureBtn.disabled = true;
            captureBtn.disabled = true;
            multiPhotos = [];
            isMultiCapture = true;

            for (let i = 0; i < 4; i++) {
                // Show which photo we're taking
                countdownOverlay.classList.remove('hidden');
                countdownNumber.textContent = `Photo ${i + 1} of 4`;
                countdownNumber.style.fontSize = '3rem';
                countdownNumber.style.animation = 'countdownPulse 1s ease-in-out';
                await new Promise(resolve => setTimeout(resolve, 1200));

                // Regular countdown (3, 2, 1)
                countdownNumber.style.fontSize = '8rem';
                await startCountdown();

                // Capture the photo
                const ctx = canvas.getContext('2d');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                ctx.save();
                ctx.scale(-1, 1);
                ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
                ctx.restore();
                multiPhotos.push(canvas.toDataURL('image/jpeg', 0.95));

                // Show "Captured!" message briefly
                if (i < 3) {
                    countdownOverlay.classList.remove('hidden');
                    countdownNumber.textContent = '‚úì';
                    countdownNumber.style.fontSize = '6rem';
                    await new Promise(resolve => setTimeout(resolve, 500));
                    countdownOverlay.classList.add('hidden');
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
            }

            // Show completion message
            countdownOverlay.classList.remove('hidden');
            countdownNumber.textContent = 'Done! ‚úì';
            countdownNumber.style.fontSize = '4rem';
            await new Promise(resolve => setTimeout(resolve, 1000));
            countdownOverlay.classList.add('hidden');

            capturedPhoto = null;
            showOutputUI();
            renderPreview();
            multiCaptureBtn.disabled = false;
            captureBtn.disabled = false;
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    capturedPhoto = e.target.result;
                    multiPhotos = [];
                    isMultiCapture = false;
                    showOutputUI();
                    renderPreview();
                };
                reader.readAsDataURL(file);
                event.target.value = '';
            }
        }

        // --- UI STATE & RENDERING ---

        function showOutputUI() {
            emptyState.classList.add('hidden');
            polaroidPreview.classList.remove('hidden');
            customizationCard.classList.remove('hidden');
        }

        function resetToDefaults() {
            capturedPhoto = null;
            multiPhotos = [];
            isMultiCapture = false;
            activeStickers = [];
            polaroidPreview.classList.add('hidden');
            customizationCard.classList.add('hidden');
            emptyState.classList.remove('hidden');
            customTextEl.value = '';

            adjustments = { ...defaultAdjustments };
            selectedFilterPreset = 'none';
            updateStickersList();
            initializeUI();
        }

        function buildFilterString() {
            return Object.entries(adjustments)
                .map(([key, value]) => `${key}(${value}%)`)
                .join(' ');
        }

        function renderPreview() {
            if (!capturedPhoto && multiPhotos.length === 0) return;

            const customText = customTextEl.value;
            const filterStyle = buildFilterString();

            if (isMultiCapture && multiPhotos.length > 0) {
                // Multi-photo grid
                const photosHTML = multiPhotos.map((photo, idx) => `
                    <div class="multi-photo-item">
                        <img src="${photo}" style="filter: ${filterStyle}" alt="Photo ${idx + 1}">
                        ${activeStickers.map(sticker => `
                            <div class="photo-sticker" style="left: ${sticker.x}%; top: ${sticker.y}%;">${sticker.emoji}</div>
                        `).join('')}
                    </div>
                `).join('');

                polaroidPreview.innerHTML = `
                    <div class="polaroid-frame" style="background: var(--color-surface)">
                        <div class="multi-photo-grid">
                            ${photosHTML}
                        </div>
                        <div class="polaroid-text" style="font-family: ${selectedFont}">${customText || ''}</div>
                        <div class="polaroid-date">${new Date().toLocaleDateString()}</div>
                    </div>
                `;
            } else if (capturedPhoto) {
                // Single photo
                polaroidPreview.innerHTML = `
                    <div class="polaroid-frame" style="background: var(--color-surface)">
                        <div class="polaroid-photo" style="position: relative;">
                            <img src="${capturedPhoto}" style="filter: ${filterStyle}" alt="Polaroid Preview">
                            ${activeStickers.map(sticker => `
                                <div class="photo-sticker" style="left: ${sticker.x}%; top: ${sticker.y}%;">${sticker.emoji}</div>
                            `).join('')}
                        </div>
                        <div class="polaroid-text" style="font-family: ${selectedFont}">${customText || ''}</div>
                        <div class="polaroid-date">${new Date().toLocaleDateString()}</div>
                    </div>
                `;
            }
        }

        // --- FINAL DOWNLOAD ---

        function downloadPolaroid() {
            if (!capturedPhoto && multiPhotos.length === 0) return;

            const dlCanvas = document.createElement('canvas');
            const ctx = dlCanvas.getContext('2d');

            const scale = 2;
            const baseWidth = 800;
            const baseHeight = 960;

            dlCanvas.width = baseWidth * scale;
            dlCanvas.height = baseHeight * scale;
            ctx.scale(scale, scale);
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';

            // 1. Frame
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, baseWidth, baseHeight);

            const photoPadding = 40;
            const photoSize = baseWidth - (photoPadding * 2);

            if (isMultiCapture && multiPhotos.length > 0) {
                // Multi-photo grid download
                let loadedCount = 0;
                const images = [];

                multiPhotos.forEach((photoSrc, idx) => {
                    const img = new Image();
                    img.onload = () => {
                        images[idx] = img;
                        loadedCount++;

                        if (loadedCount === multiPhotos.length) {
                            // Draw all photos in grid
                            const gridSize = photoSize / 2 - 4;
                            images.forEach((img, i) => {
                                const row = Math.floor(i / 2);
                                const col = i % 2;
                                const x = photoPadding + col * (gridSize + 8);
                                const y = photoPadding + row * (gridSize + 8);

                                // --- START: Aspect ratio correction logic ---
                                const sAspect = img.width / img.height;
                                const dAspect = 1.0; // Destination grid item is 1:1
                                let sx = 0, sy = 0, sWidth = img.width, sHeight = img.height;

                                if (sAspect > dAspect) {
                                    // Image is wider than 1:1, crop the sides
                                    sHeight = img.height;
                                    sWidth = img.height * dAspect;
                                    sx = (img.width - sWidth) / 2;
                                } else {
                                    // Image is taller than 1:1, crop the top/bottom
                                    sWidth = img.width;
                                    sHeight = img.width / dAspect;
                                    sy = (img.height - sHeight) / 2;
                                }
                                // --- END: Aspect ratio correction logic ---

                                ctx.filter = buildFilterString();
                                // Use the new variables to draw the cropped source into the destination
                                ctx.drawImage(img, sx, sy, sWidth, sHeight, x, y, gridSize, gridSize);
                                ctx.filter = 'none';

                                // Draw stickers on each photo
                                activeStickers.forEach(sticker => {
                                    ctx.font = `${40}px Arial`;
                                    ctx.fillText(sticker.emoji, x + (gridSize * sticker.x / 100), y + (gridSize * sticker.y / 100));
                                });
                            });

                            finishDownload(ctx, baseWidth, baseHeight, photoPadding);
                        }
                    };
                    img.crossOrigin = "anonymous";
                    img.src = photoSrc;
                });
            } else if (capturedPhoto) {
                // Single photo download
                const img = new Image();
                img.onload = () => {
                    ctx.filter = buildFilterString();

                    const sAspect = img.width / img.height;
                    const dAspect = 1.0;
                    let sx = 0, sy = 0, sWidth = img.width, sHeight = img.height;

                    if (sAspect > dAspect) {
                        sHeight = img.height;
                        sWidth = img.height * dAspect;
                        sx = (img.width - sWidth) / 2;
                    } else {
                        sWidth = img.width;
                        sHeight = img.width / dAspect;
                        sy = (img.height - sHeight) / 2;
                    }

                    ctx.drawImage(img, sx, sy, sWidth, sHeight, photoPadding, photoPadding, photoSize, photoSize);
                    ctx.filter = 'none';

                    // Draw stickers
                    activeStickers.forEach(sticker => {
                        ctx.font = `${50}px Arial`;
                        ctx.fillText(sticker.emoji, photoPadding + (photoSize * sticker.x / 100), photoPadding + (photoSize * sticker.y / 100));
                    });

                    finishDownload(ctx, baseWidth, baseHeight, photoPadding);
                };
                img.crossOrigin = "anonymous";
                img.src = capturedPhoto;
            }
        }

        function finishDownload(ctx, baseWidth, baseHeight, photoPadding) {
            const customText = customTextEl.value;
            if (customText.trim()) {
                ctx.font = `700 ${40}px ${selectedFont}`;
                ctx.fillStyle = '#3D352E';
                ctx.textAlign = 'center';
                ctx.fillText(customText, baseWidth / 2, baseHeight - 90, baseWidth - 80);
            }

            ctx.font = `500 ${18}px monospace`;
            ctx.fillStyle = '#8E8178';
            ctx.globalAlpha = 0.8;

            ctx.textAlign = 'right';
            ctx.fillText(new Date().toLocaleDateString(), baseWidth - photoPadding, baseHeight - 30);

            ctx.textAlign = 'left';
            ctx.fillText('Polaroid Booth', photoPadding, baseHeight - 30);

            const link = document.createElement('a');
            link.download = `polaroid-${Date.now()}.png`;
            link.href = ctx.canvas.toDataURL('image/png');
            link.click();
        }

        // --- EVENT LISTENERS ---
        startCameraBtn.addEventListener('click', startCamera);
        stopCameraBtn.addEventListener('click', stopCamera);
        captureBtn.addEventListener('click', capturePhoto);
        multiCaptureBtn.addEventListener('click', captureMultiPhotos);
        uploadBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileUpload);
        clearBtn.addEventListener('click', resetToDefaults);
        downloadBtn.addEventListener('click', downloadPolaroid);
        customTextEl.addEventListener('input', renderPreview);

        window.addEventListener('beforeunload', () => {
            if (stream) stream.getTracks().forEach(track => track.stop());
        });

        // --- STARTUP ---
        initializeUI();

    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Polaroid Booth</h3>
                    <p>Create stunning vintage polaroid photos online for free. Perfect for social media, memories, and
                        creative projects.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/about.html">About Us</a></li>
                        <li><a href="/contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="/privacy.html">Privacy Policy</a></li>
                        <li><a href="/terms.html">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <ul>
                        <li><a href="https://github.com/sarathoff" target="_blank" rel="noopener">GitHub</a></li>
                        <li><a href="mailto:sarathramesh.off@zohomail.in">Email Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Polaroid Booth. Developed by <a href="https://github.com/sarathoff" target="_blank"
                        rel="noopener">Sarath Ramesh</a>. All rights reserved.</p>
            </div>
        </div>
    </footer>
</body>

</html>